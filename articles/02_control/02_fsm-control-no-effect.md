---
layout: default
title: zenn-articles
---

# 【制御】⚠ 02. FSM制御が効かなかった実例
topics: ["制御", "FSM", "PID"]

---

## はじめに

離散時間 PID 制御系に対して、  
**FSM（Finite State Machine）による監督制御を追加する**という試みを行いました。

結論から書くと、

> **今回の条件では、FSM 制御による明確な効果は見られませんでした。**

本記事は、その事実と簡単な考察をまとめたものです。

---

## 🔧 やったこと

検討した構成は次の通りです。

- 連続時間プラント  
- 離散時間 PID 制御（ZOH 前提）  
- サンプリング周期の揺れ（ジッタ）を導入  
- サンプル間（intersample）で外乱が入るケースを想定  
- 上位に FSM を配置し、制御モード切替を試行  

FSM は、以下の指標を監視する構成としました。

- 誤差の増大  
- 振動傾向  
- 操作量の変動量  

---

## 🎯 期待していたこと

当初は、次のような挙動を期待していました。

- サンプリング条件が悪化した際に FSM が介入する  
- 制御性能劣化時にモード切替が起きる  
- 結果として、PID 単独よりも安定した挙動を示す  

---

## 📉 実際の結果

結果は、以下の通りでした。

- 多くのケースで **FSM は発動しなかった**  
- FSM が発動しても、制御性能に明確な改善は見られなかった  
- PID 単独の場合と大きな差が出ない条件が多かった  

少なくとも今回の設定では、

> **「FSM を入れたから制御が良くなった」と言える結果は得られませんでした。**

---

## 🤔 考察

### intersample 外乱は FSM の守備範囲外

サンプル間で発生する外乱は、  
**連続時間で状態を変化させる現象**です。

FSM はサンプル点でしか判断できないため、

- 外乱そのものを抑え込む  
- 発生直後に即応する  

といった役割は持ちません。

これは設計ミスではなく、  
**FSM の構造上の制約**です。

---

### FSM が沈黙するのは必ずしも失敗ではない

FSM は「異常があれば必ず動く装置」ではありません。

- 制御前提がまだ破綻していない  
- 下位の PID で対処できている  

場合、FSM が何もしないのは自然です。

今回の結果は、

> **FSM が不要な介入をしなかった**

と解釈することもできます。

---

## 🧾 まとめ

- FSM 制御を試したが、今回の条件では明確な効果は見られなかった  
- intersample 外乱は FSM で直接扱える問題ではない  
- FSM は制御性能を向上させる装置ではなく、運用判断のための仕組み  
- 適用範囲を誤ると「効かない」ように見える  

FSM や上位制御は万能ではありません。  
**どこまでが守備範囲かを見極めること自体が設計の一部**だと感じました。

---

## 📝 おわりに

「うまくいかなかった事例」ですが、  
この結果は今後の設計判断に十分役立つものです。

同様の構成を検討している場合、  
**FSM に過剰な期待を持たないこと**の参考になれば幸いです。
