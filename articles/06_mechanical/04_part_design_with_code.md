---
layout: default
title: Part Designを捨てずにコード設計を導入する ― FreeCADでの現実解
---

# 【機械設計:04】Part Designを捨てずにコード設計を導入する ― FreeCADでの現実解
topics: ["機械設計", "cad", "freecad", "python", "設計思想"]

---

## はじめに

これまでの記事では、

- 設計をコードとして記述できること  
- FreeCAD を使えば実際に形を生成できること  

を見てきました。

ただ、多くの現場設計者は  
ここでこう思うはずです。

> 「でも、実務は Part Design だよね？」

この記事では、その疑問に正面から答えます。

**Part Design を捨てずに、  
設計条件だけをコード側に逃がす。**

これが、現場で壊れない  
**コード設計の現実解**です。


## 今回やること

本記事で扱うのは、  
「設計の役割分担」を明確にする方法です。

- 設計条件（寸法・判断）を **コードで定義**  
- FreeCAD の **Spreadsheet** に反映  
- Part Design（Sketch / Pad）は **従来通り GUI**  
- 寸法変更は Spreadsheet だけで完結  

すべてをコードで描く話ではありません。


## 完成状態の全体像

まずは完成状態の全体像です。

![全体構成（Params と Body）](https://samizo-aitl.github.io/qiita-articles/assets/images/04_1.png)

- `Params`：設計条件（上流）  
- `Body`：Part Design による形状（下流）  

設計の本体は **Params 側** にあり、  
形状はその結果として生成されています。


## 設計条件は Spreadsheet に集約する

設計の本体は、  
Sketch や Pad ではありません。

それを明確にするのが、  
Spreadsheet です。

![Spreadsheet に集約された設計条件](https://samizo-aitl.github.io/qiita-articles/assets/images/04_2.png)

```text
LEN = 120.00 mm
WID = 40.00 mm
THK = 8.00 mm
```

- 意味のある変数名  
- 単位付きの値  
- ここだけを変更すれば設計が変わる  

この状態を作ることが目的です。


## コードの役割は「準備」だけ

この構成において、  
コードが担う役割は最小限です。

- Spreadsheet を生成する  
- 設計パラメータを書き込む  
- Sketch や Pad の寸法拘束を **式でリンク** する  

形状そのものは、  
**一切コードで描きません。**


## なぜこの構成が現実的なのか

### Part Design を否定していない

- Sketch の拘束設計  
- フィーチャ履歴  
- 図面化・後工程との親和性  

これらは、  
現場で使われ続けている理由があります。


### それでも設計条件は GUI に埋めない

一方で、

- なぜこの寸法なのか  
- どこを変えると何が変わるのか  
- 設計判断の根拠  

これらを Sketch の中に閉じ込めると、  
**後から追えなくなります。**

設計条件は、  
独立して読める場所に置く必要があります。


## 役割分担をはっきりさせる

このアプローチの本質は、  
「全部をコードにする」ことではありません。

| 役割 | 担当 |
|---|---|
| 設計条件・判断 | コード / Spreadsheet |
| 形状生成 | Part Design（GUI） |
| 視覚確認 | CADビュー |

**全部をコードにしない。**  
**全部を GUI に任せない。**

この分業が、  
実務で壊れない理由です。


## 実際の使い方

日常の運用は、非常にシンプルです。

1. `Params`（Spreadsheet）を開く  
2. 数値を変更する  
3. 再計算する  
4. 形状が自動で追従する  

Sketch や Pad を  
触る必要はありません。


## 03 との違い

- 03：  
  コードだけで形状を生成（思想の実証）  
- 04：  
  **コードと GUI の役割分担**（実務への接続）  

04 は、  
**現場に置ける形**にした回です。


## おわりに

コード設計は、  
GUI CAD を置き換えるためのものではありません。

設計条件と設計判断を、  
**再利用可能な形で残すための方法**です。

Part Design を使い続けながら、  
上流だけをコード化する。

これが、  
無理なく始められる  
**Full Code Mechanical Design の現実解**です。

次回は、  
この設計を **Git でどう管理するか**、  
差分・再設計・引き継ぎの話に進みます。


## 補足

本記事は、  
設計条件と形状生成の役割分担を理解することを  
目的としています。

FreeCAD の Spreadsheet や  
Part Design の詳細仕様については、  
公式ドキュメントをご参照ください。

- FreeCAD 公式サイト  
  https://www.freecad.org/

- FreeCAD 公式ドキュメント  
  https://wiki.freecad.org/

※ 本記事は特定の製品・ライセンスの利用を  
制限・推奨するものではありません。
